<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firefly Generator Pro</title>
    <style>
        body { background-color: #121212; color: white; font-family: sans-serif; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 800px; }
        
        /* GAYA MENU ASPECT RATIO */
        .controls { background: #1e1e1e; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #333; display: flex; gap: 10px; flex-wrap: wrap; }
        select, input, button { padding: 12px; border-radius: 8px; border: 1px solid #444; background: #2c2c2c; color: white; font-size: 14px; }
        input { flex-grow: 1; }
        button { background: #ff4500; border: none; font-weight: bold; cursor: pointer; }
        button:hover { background: #ff5722; }
        
        /* HASIL GAMBAR */
        #result { margin-top: 20px; text-align: center; }
        img { max-width: 100%; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        .loading { display: none; color: #aaa; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="text-align:center">ðŸ”¥ Firefly Stock Generator</h2>

    <div class="controls">
        <select id="ratio">
            <option value="square">Square (1:1) - IG Feed</option>
            <option value="landscape">Landscape (16:9) - Desktop/Youtube</option>
            <option value="portrait">Portrait (9:16) - Tiktok/Reels</option>
            <option value="widescreen">Ultra Wide (21:9) - Cinematic</option>
        </select>
        
        <select id="type">
            <option value="photo">ðŸ“· Foto Realistis</option>
            <option value="art">ðŸŽ¨ Digital Art</option>
        </select>
    </div>

    <div class="controls">
        <input type="text" id="prompt" placeholder="Masukkan ide gambarmu di sini...">
        <button onclick="generate()">GENERATE SEKARANG ðŸš€</button>
    </div>

    <div id="result">
        <div class="loading" id="loader">Sedang memproses... Tunggu ya bos!</div>
        <img id="image" src="" style="display:none">
    </div>
</div>

<script>
    async function generate() {
        const prompt = document.getElementById('prompt').value;
        const ratio = document.getElementById('ratio').value;
        const type = document.getElementById('type').value;
        
        if(!prompt) return alert("Isi dulu prompt-nya bos!");

        document.getElementById('loader').style.display = 'block';
        document.getElementById('image').style.display = 'none';

        try {
            const res = await fetch('/api/generate', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ text: prompt, ratio: ratio, type: type })
            });
            
            const data = await res.json();
            if(data.url) {
                document.getElementById('image').src = data.url;
                document.getElementById('image').style.display = 'block';
            } else {
                alert("Gagal: " + (data.error || "Unknown error"));
            }
        } catch(e) {
            alert("Error koneksi");
        } finally {
            document.getElementById('loader').style.display = 'none';
        }
    }
</script>

</body>
</html>
